\subsection{Magnitude}

The magnitude section takes the sinusoidal current measurement and creates a DC output by with a dual difference amplifier package. This technique as seen in \cite{absCircuit} provides a method to measure the RMS value of the AC current through the DUT. The first difference amplifier is configured as a voltage follower. Since this circuit operates only from a single power rail, it passes the positive going portions of the waveform and clamps to ground for th negative going portions of the waveform. The second difference amplifier operates in different modes, based upon the output of the first differential amplifier. During the negative going portions of the waveform, its positive terminal is held at ground, and it operates as a unity gain, inverting amplifier. This rectifies the input signal to the output. During the positive going portions of the waveform, positive input terminal is held at the value of the input terminal. This forces the second difference amplifier to act as a voltage follower. In this manner, the circuit performs a full-wave rectification on the signal, which is then filtered and fed to the ADC for digitization.

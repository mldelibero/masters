\section {Capacitor Parameters}
This section will begin by describing some of the practical uses of capacitors and then transition into the various parameters that are used to describe capacitors. Section: \ref{sec:CapacitorModeling} will show a method which allows these parameters to be extrapolated from empirical data.

\subsection{Practical Capacitor Uses}

The most basic reason for wanting to use a capacitor is that it has the ability to store charge; it has the ability to store electrical energy. Capacitors have the ability to store and release electrical energy quickly, in order to be able to react to the needs of the circuit. This section will describe some of the most common uses for capacitors.

\subsubsection{Bypassing}
\input{figures/parameters/bypass}

One of the most common uses of capacitors is in power supply bypassing. Capacitors are nearly always attached from a power rail to ground on an supply or IC. They provide a resevior of charge that limits inductive voltage spikes, such as when a digital circuit switches, and limits voltage dips, caused by things such as a current surge when a processor boots.
Both LDOs (Figure: \ref{fig:bypass}) and switchers use bypass capacitors on their input and output voltage rails. Input capacitors are divided up into two main catagories, ripple reduction and bulk. Ripple reduction capacitors need to have a low ESR (Section: \ref{sec:ESR}) and are meant to decrease the magnitude of any AC signals that ride ontop of the input DC voltage. Bulk capacitors are meant to deliver surge currents. Ouput capacitors have much the same purpose as the input capacitors. The main difference is in the case of switching power supplies. In that application, the output capacitor is a major component in the feedback loop. It contributes to both the transient and stability properties of the switcher.

\subsubsection{Analog Filtering}
\input{figures/parameters/analogFiltering}
Another use for capacitors is in analog filtering. The low-pass filter in Figure: \ref{fig:analogFiltering} attenuates frequencies above a cutoff point, set by the values of the resistor and capacitor. Low pass filters are needed in many applications, such as anti-aliasing, clock filtering, and integration.

\subsubsection{DC Blocking}
\input{figures/parameters/dcBlocking}
Designers often take advantage of capacitors' characteristic of passing AC current while blocking DC current. As in Figure: \ref{fig:dcBlock}, a capacitor can be used to block a DC offset before an amplifier.

\subsubsection{Oscillators}
\input{figures/parameters/oscillator}

Stable capacitors of a very specific value are required to make a parallel resonant oscillator function properly (Fig: \ref{fig:oscillator}). These oscillators provide the clock base for most modern digital circuits using microcontrollers.

\subsection{Capacitance}

There is a distinct difference between a capacitor and capacitance. While a capacitor's dominant characteristic is capacitance, it cannot be modeled entirely as such in most practical applications. There are also various inductive and resistive components to a capacitor that are important in various circumstances.

\begin{equation}
\label{equ:cqv}
C=\frac{Q}{V}
\end{equation}

Capacitance is the ability to store electrical charge. Equation: \eqref{equ:cqv} shows that capacitance is stored charge that is spread throughout a volume. A device that can store a lot of charge in a small space has a large capacitance. The basic equation for a commercial capacitor is seen in Equation: \eqref{equ:parPlateCap}.

\begin{equation}
\label{equ:parPlateCap}
C = \frac{\epsilon _0 A}{d}
\end{equation}

When using a capacitor in a single-pole low-pass filter, the cutoff frequency can be determined by Equation: \eqref{equ:lpfilter_eqn}. The circuit designer will choose a value for C and R in order to meet the cutoff frequency restraint.

\begin{equation}
\label{equ:lpfilter_eqn}
f = \frac{1}{2\pi RC}
\end{equation}

Varying the capacitance used in the filter will move the cutoff frequency and consequently get a different response in the filter. The effect of this can be seen in Figure: \ref{fig:lpFiltVarC}.

\input{Figures/parameters/lpFiltVarC}

\subsection{Impedance}

The impedance of a capacitor is the ``AC resistance'' of the device. It determines the AC current that will flow when an ac voltage is applied to the capacitor via Ohm's law (Equation: \eqref{equ:capOhmsEqn}). An ideal capacitor has only a single capacitive element and its impedance can be described via Equation: \eqref{equ:capImpEqu}. The two main things to notice are that the impedance is frequency dependent and it is purely imaginary (reactive).

\begin{equation}
\label{equ:capOhmsEqn}
\vec{V} = \vec{I} \vec{Z}
\end{equation}

\begin{equation}
\label{equ:capImpEqu}
\vec{Z} = \frac{1}{j\omega C}
\end{equation}

\begin{equation}
\label{equ:capMagEqn}
Z = |\vec{Z}| = \frac{1}{\omega C}
\end{equation}

In most AC applications we look at the magnitude of the impedance. Real capacitors have a more complicated impedance, but with an ideal capacitor we can simplify the magnitude equation down to Equation \eqref{equ:capMagEqn}

When capacitors are used in bypassing power supplies, the idea is to have a low impedance for common or expected noise frequencies. One may be tempted to choose a large valued capacitor to use for bypassing a wide range of frequencies. This turns out to backfire in practical situations, due to other parasitics in a real capacitor. For any capacitor, the impedance equation is more complicated, and the impedance value will begin to increase with frequency after some point. This will cause the designer to choose several different valued capacitors in parallel when bypassing a power supply or sensitive component. We will see later that the frequency plot of a capacitor will end up being more complicated than the simplified version seen in Figure: \ref{fig:cap}.

\input{Figures/parameters/cap}

\subsection{Phase}

The phase of a combination of resistive and reactive components can be written as in Equation: \eqref{equ:capPhEqn}.

\begin{equation}
\label{equ:capPhEqn}
\phi = tan^{-1}[\frac{X_c}{R_c}]
\end{equation}

For an ideal capacitor, having no resistance and only capacitance, the phase angle can be simplified to:

\begin{equation}
\label{equ:capImpEqu2}
\phi = -i = -90^0
\end{equation}

The practical implication of this can be seen in the phase response of a low pass filter (Figure: \ref{fig:lpFiltVarC}). The capacitor introduces a phase lag relative to the input signal's frequency. If you would compare the input and output signals in time, the output's peak would lag behind the input's by the phase amount predicted in the phase response.


\subsection{ESL}

The Equivalent Series Inductance (ESL) of a capacitor is a lumped estimate of all of the inductive components of a capacitor. It is typically modeled as an inductor in series with the bulk capacitance (See Figure \ref{fig:eslModel}).

\input{figures/parameters/eslModel}

Adding ESL to the capacitive model creates a new impedance equation (Equation: \eqref{equ:impESL}). Note that for L\textless \textless C, this equation simplifies to Equation: \eqref{equ:capImpEqu} for low frequencies. In other words, the ideal impedance equation can be reasonably used for low frequencies.

\begin{equation}
\label{equ:impESL}
\vec{Z_c} = j\frac{\omega ^2LC - 1}{\omega C}
%\cite{maxSwEff}
\end{equation}

\input{figures/parameters/eslImp}

Figure: \ref{fig:eslPlot} shows a graphical representation of a capacitor's magnitude and phase once ESL is considered. This plot shows that after a resonance point, the impedance of the inductor (which increases with frequency) will begin to dominate. This makes the capacitor ineffective as a bypass element at frequencies higher than its resonance point. Typically, this frequency point and the capacitor's value have an inverse relationship. This is why you will see power supplies and other chips being bypassed by a range of different valued capacitors. 

\subsection{ESR}
\label{sec:ESR}
\input{figures/parameters/esrModel}
The Equivalent Series Resistance (ESR) is the practical result of the fact that the materials used to create a capacitor have resistance. In simple cases, this can be approximated by a resistance in series with the main capacitor (See Figure: \ref{fig:esrModel}).

ESR becomes is important when thinking about DCDC switch mode power supplies. The output ripple voltage of the converter will cause a rripple current to pass through the ESR and dissipate heat as per Equation: \eqref{equ:dcdcESReqn}. It is important to choose a low ESR capacitor in order to reduce failures.

\begin{equation}
\label{equ:dcdcESReqn}
P_E = I_{C,RMS}^2 * R_E
\cite{maxSwEff}
\end{equation}

Another important thing to note about ESR is that even though it is shown as a resistance in simple models, it is not constant across all frequencies. It is a simplification of the resistive and capacitive elements in a capacitor that are dominated by resistance. That said, it is sufficient for a basic understanding of a capacitor's impedance (Equation \eqref{equ:ImpCEslEsr}.

\begin{equation}
\label{equ:ImpCEslEsr}
\vec{Z_c} = \frac{1 + j\omega R_EC + (j\omega)^2L_EC}{j\omega C}
\end{equation}

\subsection{Resonance Frequency}
\input{figures/parameters/RLCModel}

Once C, ESL, and ESR are included into the capacitor model (Figure: \ref{fig:RLCModel}, a parameter known as the self-resonant frequency becomes evident. Equation: \eqref{equ:ImpCEslEsr} shows that when $Z_{ESL} == Z_C$, the capacitor is at its resonance point. At this frequency, the capacitor's impedance is determined solely by the ESR at that frequency. This frequency can be calculated by Equation: \eqref{equ:fres}.

\begin{equation}
\label{equ:fres}
f_r = \frac{1}{2\pi \sqrt{LC}}
\end{equation}

\subsection{Dissipation Factor}
\input{figures/parameters/lossTan}

The dissipation factor, otherwise known as the loss-tangent, is a measure of the energy stored to the energy dissipated per cycle. It is a measurement of the efficiency of the capacitor. The DF can be quantified through Equation: \eqref{equ:dispFac}. 

\begin{equation}
\label{equ:dispFac}
D = \frac{R_E}{X_C}
\end{equation}

The loss tangent can be seen in Figure: \ref{fig:lossTan}. The greater the angle, the more efficient the capacitor will be.

\subsection{Quality Factor}

\begin{equation}
\label{equ:qual}
Q = \frac{1}{D}
\end{equation}

The Quality Factor, Q, of a capacitor is found by taking the reciprocal of the dissipation factor, Equation: \eqref{equ:qual}. It is defined as the ratio of the energy stored to the energy dissipated per cycle.

\subsection{Leakage Resistance}

Every capacitor will have some DC leakage resistance associated with it. This resistance affects the capacitor's ability to store charge. A high leakage resistance results in a capacitor with low self-discharge. This characteristic is especially important in sample and hold circuits.

\subsection{Dielectric Absorption}
\input{figures/parameters/dieAbsorption}

Dielectric Absorption, DA, in a capacitor is a characteristic which describes the unit's ability to ``regenerate'' a voltage after being shorted to ground for a brief time.

As seen in Figure: \ref{fig:dieAbsorption}, a capacitor can be modeled with multiple RC elements in parallel with the bulk capacitance. When the main capacitor is shorted to ground for a short time, and then released, the other capacitors are not gauranteed to have been fullly discharged. After several minutes, they can recharge the main capacitance to a significant portion of its original charge. This is why large valued electrolytic capacitors get shipped with a resistor across their terminals.

